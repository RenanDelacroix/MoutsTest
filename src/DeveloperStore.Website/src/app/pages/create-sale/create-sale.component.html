<form (ngSubmit)="submit()" class="sale-form">
  <h2>ðŸ†• Nova Venda</h2>

  <!-- SeleÃ§Ã£o da Filial -->
  <mat-form-field appearance="fill">
    <mat-label>Filial</mat-label>
    <mat-select [(ngModel)]="sale.branchId" name="branchId" required>
      <mat-option *ngFor="let branch of branches" [value]="branch.id">
        {{ branch.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Linha para selecionar e adicionar produto -->
  <div class="add-product-row">
    <mat-form-field appearance="fill">
      <mat-label>Produto</mat-label>
      <mat-select [(ngModel)]="selectedProductId" name="selectedProductId" required>
        <mat-option *ngFor="let product of products" [value]="product.id">
          {{ product.name }} (R$ {{ product.price }})
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Quantidade</mat-label>
      <input matInput type="number" [(ngModel)]="selectedQuantity" name="selectedQuantity" min="1" required />
    </mat-form-field>

    <button mat-mini-fab color="primary" type="button" (click)="addProductToPanel()">
      <mat-icon>add</mat-icon>
    </button>
  </div>

  <!-- Painel lateral de produtos -->
  <div class="product-panel">
    <h3>Produtos adicionados</h3>
    <div *ngIf="sale.items.length === 0">Nenhum produto adicionado</div>
    <table *ngIf="sale.items.length > 0" class="product-table">
      <tr>
        <th>Produto</th>
        <th>Qtd</th>
        <th>PreÃ§o</th>
        <th>Subtotal</th>
      </tr>
      <tr *ngFor="let item of sale.items">
        <td>{{ getProductName(item.productId) }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ getProductPrice(item.productId) | currency:'BRL' }}</td>
        <td>{{ item.quantity * getProductPrice(item.productId) | currency:'BRL' }}</td>
      </tr>
    </table>
  </div>

  <!-- BotÃ£o enviar -->
  <button mat-raised-button color="accent" type="submit">ðŸ’¾ Enviar</button>
</form>
